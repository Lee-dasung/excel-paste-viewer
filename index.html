<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>íŒŒíŒŒê³  ì™„ì „ ë³µì‚¬</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Malgun Gothic", "Segoe UI", Roboto, sans-serif;
      background-color: #f7f9fc;
      margin: 0;
      padding: 20px;
      line-height: 1.5;
    }
    
    .papago-container {
      max-width: 800px;
      margin: 0 auto;
      background: #ffffff;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      overflow: hidden;
    }
    
    .papago-header {
      background: linear-gradient(135deg, #1ec800 0%, #0fb300 100%);
      color: white;
      padding: 24px 32px;
      text-align: center;
    }
    
    .papago-header h1 {
      margin: 0;
      font-size: 24px;
      font-weight: 700;
    }
    
    .papago-main {
      padding: 32px;
    }
    
    /* íŒŒíŒŒê³ ì™€ ë™ì¼í•œ ìŠ¤íƒ€ì¼ */
    .translation-container {
      display: flex;
      gap: 16px;
      min-height: 300px;
    }
    
    .source-panel, .target-panel {
      flex: 1;
      border: 1px solid #e0e4e7;
      border-radius: 8px;
      overflow: hidden;
      background: #ffffff;
    }
    
    .panel-header {
      background: #f8f9fa;
      padding: 12px 16px;
      border-bottom: 1px solid #e0e4e7;
      font-size: 14px;
      font-weight: 500;
      color: #495057;
    }
    
    /* íŒŒíŒŒê³  textareaì™€ ì™„ì „ ë™ì¼í•˜ê²Œ */
    .papago-textarea {
      width: 100%;
      min-height: 250px;
      max-height: 400px;
      padding: 16px;
      border: none;
      outline: none;
      resize: none;
      font-family: inherit;
      font-size: 16px;
      line-height: 1.5;
      background: transparent;
      box-sizing: border-box;
    }
    
    .papago-textarea::placeholder {
      color: #9ca3af;
      font-style: normal;
    }
    
    .papago-textarea::-webkit-scrollbar {
      width: 6px;
    }
    
    .papago-textarea::-webkit-scrollbar-track {
      background: #f1f1f1;
    }
    
    .papago-textarea::-webkit-scrollbar-thumb {
      background: #c1c1c1;
      border-radius: 3px;
    }
    
    .controls {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-top: 20px;
    }
    
    .papago-btn {
      padding: 10px 20px;
      border: 1px solid #e0e4e7;
      border-radius: 6px;
      background: white;
      color: #495057;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .papago-btn:hover {
      border-color: #1ec800;
      background: #f8fff8;
    }
    
    .papago-btn.primary {
      background: #1ec800;
      color: white;
      border-color: #1ec800;
    }
    
    .papago-btn.primary:hover {
      background: #0fb300;
    }
    
    .result-section {
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid #e0e4e7;
    }
    
    .result-area {
      background: #f8f9fa;
      border: 1px solid #e0e4e7;
      border-radius: 8px;
      padding: 20px;
      min-height: 200px;
      max-height: 400px;
      overflow: auto;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 15px 0;
      background: white;
      border-radius: 6px;
      overflow: hidden;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    
    table th, table td {
      padding: 10px 12px;
      text-align: left;
      border-bottom: 1px solid #e0e4e7;
    }
    
    table th {
      background: #f8f9fa;
      font-weight: 600;
      color: #495057;
    }
    
    table tr:hover {
      background: #f8fff8;
    }
    
    .status {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 12px 20px;
      border-radius: 6px;
      color: white;
      font-size: 13px;
      font-weight: 500;
      z-index: 1000;
      transform: translateX(100%);
      transition: transform 0.3s ease;
    }
    
    .status.show {
      transform: translateX(0);
    }
    
    .status.success {
      background: #28a745;
    }
    
    .status.error {
      background: #dc3545;
    }
    
    .debug-info {
      background: #fff3cd;
      border: 1px solid #ffeaa7;
      color: #856404;
      padding: 15px;
      border-radius: 6px;
      margin-bottom: 20px;
      font-size: 14px;
    }
    
    @media (max-width: 768px) {
      .translation-container {
        flex-direction: column;
      }
      
      .papago-main {
        padding: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="papago-container">
    <div class="papago-header">
      <h1>íŒŒíŒŒê³  ë°©ì‹ ì™„ì „ ë³µì‚¬</h1>
      <p>ë³´ì•ˆ PCì—ì„œ ì‘ë™í•˜ëŠ” íŒŒíŒŒê³  ë°©ì‹ì„ ì •í™•íˆ ë”°ë¼í•¨</p>
    </div>
    
    <div class="papago-main">
      <div class="debug-info" id="debugInfo">
        ğŸ” <strong>ë””ë²„ê·¸ ëª¨ë“œ:</strong> í´ë¦½ë³´ë“œ ì´ë²¤íŠ¸ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ê°ì§€í•©ë‹ˆë‹¤.
      </div>
      
      <div class="translation-container">
        <div class="source-panel">
          <div class="panel-header">
            ë°ì´í„° ì…ë ¥ (íŒŒíŒŒê³  ë°©ì‹)
          </div>
          <textarea 
            class="papago-textarea" 
            id="sourceText"
            placeholder="ì—¬ê¸°ì— í…ìŠ¤íŠ¸ë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”...

ì—‘ì…€ ë°ì´í„°ë„ í…ìŠ¤íŠ¸ í˜•íƒœë¡œ ë¶™ì—¬ë„£ê¸° ê°€ëŠ¥
íƒ­ì´ë‚˜ ì½¤ë§ˆë¡œ êµ¬ë¶„ëœ ë°ì´í„° ì§€ì›"
            spellcheck="false"
            autocomplete="off"
            autocorrect="off"
            autocapitalize="off"
          ></textarea>
        </div>
        
        <div class="target-panel">
          <div class="panel-header">
            ì²˜ë¦¬ ê²°ê³¼
          </div>
          <div class="result-area" id="targetArea">
            <div style="text-align: center; color: #9ca3af; padding: 80px 20px;">
              ì…ë ¥ëœ ë°ì´í„°ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤
            </div>
          </div>
        </div>
      </div>
      
      <div class="controls">
        <button class="papago-btn primary" onclick="processText()">ğŸ“Š í‘œë¡œ ë³€í™˜</button>
        <button class="papago-btn" onclick="clearAll()">ğŸ—‘ï¸ ì§€ìš°ê¸°</button>
        <button class="papago-btn" onclick="testClipboard()">ğŸ” í´ë¦½ë³´ë“œ í…ŒìŠ¤íŠ¸</button>
        <button class="papago-btn" onclick="copyResult()">ğŸ“‹ ê²°ê³¼ ë³µì‚¬</button>
      </div>
      
      <div class="result-section">
        <h3>ë³€í™˜ëœ í‘œ</h3>
        <div class="result-area" id="tableResult">
          <div style="text-align: center; color: #9ca3af; padding: 40px 20px;">
            ë³€í™˜ëœ í‘œê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="status" id="status"></div>

  <script>
    const sourceText = document.getElementById('sourceText');
    const targetArea = document.getElementById('targetArea');
    const tableResult = document.getElementById('tableResult');
    const debugInfo = document.getElementById('debugInfo');
    const status = document.getElementById('status');

    let eventCount = 0;

    // ìƒíƒœ ë©”ì‹œì§€ í‘œì‹œ
    function showStatus(message, type = 'success') {
      status.textContent = message;
      status.className = `status ${type} show`;
      setTimeout(() => {
        status.classList.remove('show');
      }, 3000);
    }

    // ë””ë²„ê·¸ ì •ë³´ ì—…ë°ì´íŠ¸
    function updateDebug(message) {
      eventCount++;
      debugInfo.innerHTML = `ğŸ” <strong>ì´ë²¤íŠ¸ ${eventCount}:</strong> ${message}`;
    }

    // íŒŒíŒŒê³ ì™€ ë™ì¼í•œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë“¤
    sourceText.addEventListener('paste', function(event) {
      updateDebug('paste ì´ë²¤íŠ¸ ê°ì§€ë¨');
      console.log('paste event triggered');
      
      // ê¸°ë³¸ ë™ì‘ í—ˆìš© (íŒŒíŒŒê³  ë°©ì‹)
      setTimeout(() => {
        const value = sourceText.value;
        if (value.trim()) {
          updateDebug(`í…ìŠ¤íŠ¸ ê°ì§€ë¨ (${value.length}ì)`);
          targetArea.innerHTML = `<pre style="white-space: pre-wrap; font-family: 'Courier New', monospace;">${value}</pre>`;
          showStatus('í…ìŠ¤íŠ¸ê°€ ë¶™ì—¬ë„£ì–´ì¡ŒìŠµë‹ˆë‹¤!');
        }
      }, 50);
    });

    sourceText.addEventListener('input', function(event) {
      updateDebug('input ì´ë²¤íŠ¸ ê°ì§€ë¨');
      console.log('input event triggered');
      
      const value = sourceText.value;
      if (value.trim()) {
        targetArea.innerHTML = `<pre style="white-space: pre-wrap; font-family: 'Courier New', monospace;">${value}</pre>`;
      }
    });

    sourceText.addEventListener('change', function(event) {
      updateDebug('change ì´ë²¤íŠ¸ ê°ì§€ë¨');
      console.log('change event triggered');
    });

    sourceText.addEventListener('keydown', function(event) {
      if (event.ctrlKey && event.key === 'v') {
        updateDebug('Ctrl+V í‚¤ ì¡°í•© ê°ì§€ë¨');
        console.log('Ctrl+V detected');
      }
    });

    sourceText.addEventListener('focus', function(event) {
      updateDebug('í¬ì»¤ìŠ¤ ê°ì§€ë¨');
      console.log('focus event');
    });

    sourceText.addEventListener('blur', function(event) {
      updateDebug('í¬ì»¤ìŠ¤ í•´ì œë¨');
      console.log('blur event');
    });

    // í´ë¦½ë³´ë“œ í…ŒìŠ¤íŠ¸
    function testClipboard() {
      updateDebug('í´ë¦½ë³´ë“œ ì ‘ê·¼ í…ŒìŠ¤íŠ¸ ì¤‘...');
      
      // ì—¬ëŸ¬ ë°©ë²•ìœ¼ë¡œ í´ë¦½ë³´ë“œ í…ŒìŠ¤íŠ¸
      if (navigator.clipboard) {
        navigator.clipboard.readText().then(text => {
          updateDebug(`í´ë¦½ë³´ë“œ ì½ê¸° ì„±ê³µ: ${text.substring(0, 50)}...`);
          showStatus('í´ë¦½ë³´ë“œ ì ‘ê·¼ ê°€ëŠ¥!', 'success');
        }).catch(err => {
          updateDebug('í´ë¦½ë³´ë“œ API ì ‘ê·¼ ì‹¤íŒ¨');
          showStatus('í´ë¦½ë³´ë“œ API ì°¨ë‹¨ë¨', 'error');
        });
      } else {
        updateDebug('í´ë¦½ë³´ë“œ API ë¯¸ì§€ì›');
        showStatus('í´ë¦½ë³´ë“œ API ë¯¸ì§€ì›', 'error');
      }
    }

    // í…ìŠ¤íŠ¸ ì²˜ë¦¬
    function processText() {
      const text = sourceText.value.trim();
      
      if (!text) {
        showStatus('ì²˜ë¦¬í•  í…ìŠ¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤!', 'error');
        return;
      }

      updateDebug('í…ìŠ¤íŠ¸ ì²˜ë¦¬ ì‹œì‘');
      
      try {
        const result = parseToTable(text);
        tableResult.innerHTML = result;
        showStatus('í‘œë¡œ ë³€í™˜ ì™„ë£Œ!');
        updateDebug('í‘œ ë³€í™˜ ì„±ê³µ');
      } catch (error) {
        showStatus('ë³€í™˜ ì¤‘ ì˜¤ë¥˜ ë°œìƒ!', 'error');
        updateDebug(`ë³€í™˜ ì˜¤ë¥˜: ${error.message}`);
      }
    }

    // í‘œ ë³€í™˜ í•¨ìˆ˜
    function parseToTable(text) {
      const lines = text.split('\n').filter(line => line.trim());
      
      if (lines.length === 0) {
        return '<div style="text-align: center; color: #9ca3af;">ë³€í™˜í•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤</div>';
      }

      // êµ¬ë¶„ì ê°ì§€
      let delimiter = '\t';
      const firstLine = lines[0];
      if (firstLine.includes(',') && !firstLine.includes('\t')) {
        delimiter = ',';
      } else if (firstLine.includes('|')) {
        delimiter = '|';
      } else if (!firstLine.includes('\t') && firstLine.includes(' ')) {
        delimiter = /\s+/;
      }

      let html = '<table>';
      
      lines.forEach((line, index) => {
        html += '<tr>';
        const cells = typeof delimiter === 'string' ? line.split(delimiter) : line.split(delimiter);
        
        cells.forEach(cellText => {
          const tag = index === 0 ? 'th' : 'td';
          html += `<${tag}>${cellText.trim() || '&nbsp;'}</${tag}>`;
        });
        
        html += '</tr>';
      });
      
      html += '</table>';
      
      const delimiterName = delimiter === '\t' ? 'íƒ­' : 
                           delimiter === ',' ? 'ì½¤ë§ˆ' : 
                           delimiter === '|' ? 'íŒŒì´í”„' : 'ê³µë°±';
      
      html += `<div style="text-align: center; color: #666; margin-top: 15px; font-size: 14px;">
        ğŸ“Š ${lines.length}í–‰ Ã— ${lines[0].split(delimiter).length}ì—´ (êµ¬ë¶„ì: ${delimiterName})
      </div>`;
      
      return html;
    }

    // ì „ì²´ ì§€ìš°ê¸°
    function clearAll() {
      if (confirm('ëª¨ë“  ë‚´ìš©ì„ ì§€ìš°ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        sourceText.value = '';
        targetArea.innerHTML = '<div style="text-align: center; color: #9ca3af; padding: 80px 20px;">ì…ë ¥ëœ ë°ì´í„°ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</div>';
        tableResult.innerHTML = '<div style="text-align: center; color: #9ca3af; padding: 40px 20px;">ë³€í™˜ëœ í‘œê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</div>';
        updateDebug('ëª¨ë“  ë‚´ìš© ì‚­ì œë¨');
        showStatus('ë‚´ìš©ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤');
      }
    }

    // ê²°ê³¼ ë³µì‚¬
    function copyResult() {
      const tables = tableResult.querySelectorAll('table');
      if (tables.length === 0) {
        showStatus('ë³µì‚¬í•  í‘œê°€ ì—†ìŠµë‹ˆë‹¤!', 'error');
        return;
      }

      try {
        let textContent = '';
        tables[0].querySelectorAll('tr').forEach(row => {
          const cells = Array.from(row.querySelectorAll('th, td'));
          const rowText = cells.map(cell => cell.textContent.trim()).join('\t');
          textContent += rowText + '\n';
        });

        const tempTextarea = document.createElement('textarea');
        tempTextarea.value = textContent;
        document.body.appendChild(tempTextarea);
        tempTextarea.select();
        
        if (document.execCommand('copy')) {
          showStatus('í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
          updateDebug('ë³µì‚¬ ì„±ê³µ');
        } else {
          throw new Error('ë³µì‚¬ ì‹¤íŒ¨');
        }
        
        document.body.removeChild(tempTextarea);
      } catch (error) {
        showStatus('ë³µì‚¬ ê¸°ëŠ¥ì´ ì œí•œë˜ì–´ ìˆìŠµë‹ˆë‹¤', 'error');
        updateDebug('ë³µì‚¬ ì‹¤íŒ¨');
      }
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
    window.addEventListener('load', function() {
      updateDebug('í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ - íŒŒíŒŒê³  ë°©ì‹ í™œì„±í™”');
      sourceText.focus();
      
      // í´ë¦½ë³´ë“œ ê¶Œí•œ í™•ì¸
      if ('permissions' in navigator) {
        navigator.permissions.query({name: 'clipboard-read'}).then(result => {
          updateDebug(`í´ë¦½ë³´ë“œ ê¶Œí•œ: ${result.state}`);
        });
      }
    });

    // ì „ì—­ ì´ë²¤íŠ¸ ê°ì§€
    document.addEventListener('paste', function(event) {
      updateDebug('ì „ì—­ paste ì´ë²¤íŠ¸ ê°ì§€ë¨');
    });

    // í‚¤ë³´ë“œ ì´ë²¤íŠ¸ ê°ì§€
    document.addEventListener('keydown', function(event) {
      if (event.ctrlKey && event.key === 'v') {
        updateDebug('ì „ì—­ Ctrl+V ê°ì§€ë¨');
      }
    });
  </script>
</body>
</html>
