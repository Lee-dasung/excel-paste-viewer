<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>íŒŒíŒŒê³  ìŠ¤íƒ€ì¼ ë·°ì–´</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Malgun Gothic', -apple-system, BlinkMacSystemFont, sans-serif;
      background: #f7f9fc;
      padding: 20px;
      line-height: 1.5;
    }
    
    .container {
      max-width: 1000px;
      margin: 0 auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      overflow: hidden;
    }
    
    .header {
      background: linear-gradient(135deg, #1ec800, #0fb300);
      color: white;
      padding: 30px;
      text-align: center;
    }
    
    .header h1 {
      font-size: 28px;
      margin-bottom: 8px;
      font-weight: 700;
    }
    
    .header p {
      font-size: 16px;
      opacity: 0.9;
    }
    
    .main-content {
      padding: 30px;
    }
    
    .input-section {
      margin-bottom: 30px;
    }
    
    .input-label {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: #333;
      margin-bottom: 8px;
    }
    
    /* íŒŒíŒŒê³  ìŠ¤íƒ€ì¼ ì…ë ¥ì°½ */
    .input-container {
      position: relative;
      border: 2px solid #e0e0e0;
      border-radius: 12px;
      background: white;
      transition: all 0.3s ease;
    }
    
    .input-container:focus-within {
      border-color: #1ec800;
      box-shadow: 0 0 0 4px rgba(30, 200, 0, 0.1);
    }
    
    .input-area {
      width: 100%;
      min-height: 200px;
      max-height: 400px;
      padding: 20px;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-family: inherit;
      line-height: 1.6;
      resize: vertical;
      outline: none;
      background: transparent;
    }
    
    .input-area::placeholder {
      color: #9ca3af;
      font-style: normal;
    }
    
    /* íŒŒíŒŒê³  ìŠ¤íƒ€ì¼ í”Œë ˆì´ìŠ¤í™€ë” */
    .placeholder-text {
      position: absolute;
      top: 20px;
      left: 20px;
      color: #9ca3af;
      font-size: 16px;
      pointer-events: none;
      transition: all 0.3s ease;
      white-space: pre-line;
    }
    
    .input-area:focus + .placeholder-text,
    .input-area:not(:placeholder-shown) + .placeholder-text {
      opacity: 0;
      transform: translateY(-10px);
    }
    
    .controls {
      display: flex;
      gap: 10px;
      margin-top: 15px;
      flex-wrap: wrap;
    }
    
    .btn {
      padding: 10px 20px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      background: white;
      color: #333;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .btn:hover {
      border-color: #1ec800;
      background: #f0fff4;
    }
    
    .btn-primary {
      background: #1ec800;
      color: white;
      border-color: #1ec800;
    }
    
    .btn-primary:hover {
      background: #16a085;
    }
    
    .result-section {
      border-top: 1px solid #f0f0f0;
      padding-top: 30px;
    }
    
    .result-area {
      background: #f8fafc;
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      padding: 20px;
      min-height: 200px;
      max-height: 500px;
      overflow: auto;
    }
    
    .empty-state {
      text-align: center;
      color: #9ca3af;
      font-style: italic;
      padding: 60px 20px;
    }
    
    /* íŒŒíŒŒê³  ìŠ¤íƒ€ì¼ í…Œì´ë¸” */
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 15px 0;
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    }
    
    table th, table td {
      padding: 12px 16px;
      text-align: left;
      border-bottom: 1px solid #f0f0f0;
    }
    
    table th {
      background: #f8fafc;
      font-weight: 600;
      color: #374151;
      font-size: 14px;
    }
    
    table tr:last-child td {
      border-bottom: none;
    }
    
    table tr:hover {
      background: #f9fafb;
    }
    
    .info-text {
      font-size: 12px;
      color: #6b7280;
      margin-top: 10px;
      text-align: center;
    }
    
    .status-indicator {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 12px 20px;
      border-radius: 8px;
      color: white;
      font-weight: 500;
      z-index: 1000;
      transform: translateX(100%);
      transition: transform 0.3s ease;
    }
    
    .status-indicator.show {
      transform: translateX(0);
    }
    
    .status-indicator.success {
      background: #10b981;
    }
    
    .status-indicator.error {
      background: #ef4444;
    }
    
    /* íŒŒíŒŒê³  ìŠ¤íƒ€ì¼ ë¡œë”© */
    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid #f3f3f3;
      border-top: 3px solid #1ec800;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* ëª¨ë°”ì¼ ë°˜ì‘í˜• */
    @media (max-width: 768px) {
      body {
        padding: 10px;
      }
      
      .main-content {
        padding: 20px;
      }
      
      .header {
        padding: 20px;
      }
      
      .header h1 {
        font-size: 24px;
      }
      
      .controls {
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ“‹ ë°ì´í„° ë¶™ì—¬ë„£ê¸° ë·°ì–´</h1>
      <p>íŒŒíŒŒê³  ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ëœ ì•ˆì „í•œ í´ë¦½ë³´ë“œ ì²˜ë¦¬</p>
    </div>
    
    <div class="main-content">
      <div class="input-section">
        <label class="input-label">ë°ì´í„° ì…ë ¥</label>
        <div class="input-container">
          <textarea 
            class="input-area" 
            id="dataInput"
            placeholder="ì—¬ê¸°ì— ì—‘ì…€ ë°ì´í„°ë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”...

ğŸ”¸ ì—‘ì…€ì—ì„œ ë³µì‚¬í•œ í‘œ ë°ì´í„°
ğŸ”¸ íƒ­, ì½¤ë§ˆ, ê³µë°±ìœ¼ë¡œ êµ¬ë¶„ëœ í…ìŠ¤íŠ¸
ğŸ”¸ CSV í˜•íƒœì˜ ë°ì´í„°

ë³´ì•ˆ PCì—ì„œëŠ” ë©”ëª¨ì¥ì„ ê²½ìœ í•´ì„œ ë¶™ì—¬ë„£ì–´ ë³´ì„¸ìš”!"
          ></textarea>
        </div>
        
        <div class="controls">
          <button class="btn btn-primary" onclick="processData()">
            <span id="processBtn">ğŸ“Š í‘œë¡œ ë³€í™˜</span>
          </button>
          <button class="btn" onclick="clearData()">ğŸ—‘ï¸ ì§€ìš°ê¸°</button>
          <button class="btn" onclick="copyResult()">ğŸ“‹ ê²°ê³¼ ë³µì‚¬</button>
          <button class="btn" onclick="downloadCSV()">ğŸ’¾ CSV ë‹¤ìš´ë¡œë“œ</button>
        </div>
        
        <div class="info-text">
          ğŸ’¡ <strong>íŒ:</strong> Ctrl+Vë¡œ ë¶™ì—¬ë„£ê¸°ê°€ ì•ˆ ë˜ë©´ ë©”ëª¨ì¥(notepad) â†’ ë³µì‚¬ â†’ ì—¬ê¸°ì— ë¶™ì—¬ë„£ê¸°
        </div>
      </div>
      
      <div class="result-section">
        <label class="input-label">ë³€í™˜ ê²°ê³¼</label>
        <div class="result-area" id="resultArea">
          <div class="empty-state">
            ìœ„ì— ë°ì´í„°ë¥¼ ì…ë ¥í•˜ê³  "í‘œë¡œ ë³€í™˜" ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="status-indicator" id="statusIndicator"></div>

  <script>
    const dataInput = document.getElementById('dataInput');
    const resultArea = document.getElementById('resultArea');
    const statusIndicator = document.getElementById('statusIndicator');
    const processBtn = document.getElementById('processBtn');

    // ìƒíƒœ ë©”ì‹œì§€ í‘œì‹œ
    function showStatus(message, type = 'success') {
      statusIndicator.textContent = message;
      statusIndicator.className = `status-indicator ${type} show`;
      setTimeout(() => {
        statusIndicator.classList.remove('show');
      }, 3000);
    }

    // íŒŒíŒŒê³  ë°©ì‹ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë“¤
    dataInput.addEventListener('paste', handlePaste);
    dataInput.addEventListener('input', handleInput);
    dataInput.addEventListener('change', handleInput);

    // ë¶™ì—¬ë„£ê¸° ì´ë²¤íŠ¸ (íŒŒíŒŒê³  ë°©ì‹)
    function handlePaste(event) {
      console.log('Paste event detected');
      
      // ê¸°ë³¸ ë¶™ì—¬ë„£ê¸° ë™ì‘ì€ ê·¸ëŒ€ë¡œ ë‘ê³ , ì¶”ê°€ ì²˜ë¦¬ë§Œ ìˆ˜í–‰
      setTimeout(() => {
        const value = dataInput.value;
        if (value.trim()) {
          console.log('Pasted content:', value.substring(0, 100) + '...');
          showStatus('ë°ì´í„°ê°€ ë¶™ì—¬ë„£ì–´ì¡ŒìŠµë‹ˆë‹¤!');
          
          // ìë™ìœ¼ë¡œ í‘œ í˜•íƒœì¸ì§€ ê°ì§€í•˜ì—¬ ë¯¸ë¦¬ë³´ê¸°
          if (detectTableData(value)) {
            setTimeout(() => {
              processData();
            }, 500);
          }
        }
      }, 100);
    }

    // ì…ë ¥ ë³€í™” ê°ì§€ (íŒŒíŒŒê³  ë°©ì‹)
    function handleInput(event) {
      const value = dataInput.value.trim();
      if (value) {
        console.log('Input detected, length:', value.length);
      }
    }

    // í‘œ ë°ì´í„° ê°ì§€
    function detectTableData(text) {
      const lines = text.split('\n').filter(line => line.trim());
      if (lines.length < 2) return false;
      
      // íƒ­ì´ë‚˜ ì½¤ë§ˆê°€ í¬í•¨ë˜ì–´ ìˆìœ¼ë©´ í‘œ ë°ì´í„°ë¡œ íŒë‹¨
      return lines[0].includes('\t') || lines[0].includes(',') || lines[0].includes('|');
    }

    // ë°ì´í„° ì²˜ë¦¬ (íŒŒíŒŒê³  ë°©ì‹)
    function processData() {
      const inputText = dataInput.value.trim();
      
      if (!inputText) {
        showStatus('ì²˜ë¦¬í•  ë°ì´í„°ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!', 'error');
        return;
      }

      // ë¡œë”© í‘œì‹œ
      processBtn.innerHTML = '<span class="loading"></span> ì²˜ë¦¬ì¤‘...';
      
      setTimeout(() => {
        try {
          const result = parseTextToTable(inputText);
          resultArea.innerHTML = result;
          showStatus('í‘œë¡œ ë³€í™˜ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
        } catch (error) {
          console.error('Processing error:', error);
          showStatus('ë°ì´í„° ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤!', 'error');
        } finally {
          processBtn.innerHTML = 'ğŸ“Š í‘œë¡œ ë³€í™˜';
        }
      }, 300);
    }

    // í…ìŠ¤íŠ¸ë¥¼ í‘œë¡œ ë³€í™˜ (íŒŒíŒŒê³  ë°©ì‹)
    function parseTextToTable(text) {
      const lines = text.split('\n').filter(line => line.trim());
      
      if (lines.length === 0) {
        return '<div class="empty-state">ë³€í™˜í•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤</div>';
      }

      // êµ¬ë¶„ì ìë™ ê°ì§€ (íŒŒíŒŒê³  ë°©ì‹)
      let delimiter = detectDelimiter(lines[0]);
      
      console.log('Detected delimiter:', delimiter === '\t' ? 'TAB' : delimiter);
      
      let html = '<table>';
      
      lines.forEach((line, index) => {
        html += '<tr>';
        
        const cells = line.split(delimiter);
        cells.forEach(cellText => {
          const tag = index === 0 ? 'th' : 'td';
          const cleanText = cellText.trim() || '&nbsp;';
          html += `<${tag}>${cleanText}</${tag}>`;
        });
        
        html += '</tr>';
      });
      
      html += '</table>';
      
      // ì •ë³´ í‘œì‹œ
      const delimiterName = delimiter === '\t' ? 'íƒ­' : 
                           delimiter === ',' ? 'ì½¤ë§ˆ' : 
                           delimiter === '|' ? 'íŒŒì´í”„' : 'ê³µë°±';
      
      html += `<div class="info-text">
        ğŸ“Š ${lines.length}í–‰ Ã— ${lines[0].split(delimiter).length}ì—´ 
        (êµ¬ë¶„ì: ${delimiterName})
      </div>`;
      
      return html;
    }

    // êµ¬ë¶„ì ê°ì§€ (íŒŒíŒŒê³  ë°©ì‹)
    function detectDelimiter(line) {
      // ìš°ì„ ìˆœìœ„: íƒ­ > ì½¤ë§ˆ > íŒŒì´í”„ > ê³µë°±
      if (line.includes('\t')) return '\t';
      if (line.includes(',')) return ',';
      if (line.includes('|')) return '|';
      return /\s+/; // ê³µë°± (ì •ê·œì‹)
    }

    // ë°ì´í„° ì§€ìš°ê¸°
    function clearData() {
      if (confirm('ì…ë ¥ëœ ë°ì´í„°ë¥¼ ëª¨ë‘ ì§€ìš°ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        dataInput.value = '';
        resultArea.innerHTML = '<div class="empty-state">ìœ„ì— ë°ì´í„°ë¥¼ ì…ë ¥í•˜ê³  "í‘œë¡œ ë³€í™˜" ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”</div>';
        showStatus('ë°ì´í„°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤');
      }
    }

    // ê²°ê³¼ ë³µì‚¬ (íŒŒíŒŒê³  ë°©ì‹)
    function copyResult() {
      try {
        const tables = resultArea.querySelectorAll('table');
        if (tables.length === 0) {
          showStatus('ë³µì‚¬í•  í‘œê°€ ì—†ìŠµë‹ˆë‹¤!', 'error');
          return;
        }

        // í‘œë¥¼ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜
        let textContent = '';
        tables[0].querySelectorAll('tr').forEach(row => {
          const cells = Array.from(row.querySelectorAll('th, td'));
          const rowText = cells.map(cell => cell.textContent.trim()).join('\t');
          textContent += rowText + '\n';
        });

        // ì„ì‹œ textarea ìƒì„±í•´ì„œ ë³µì‚¬ (íŒŒíŒŒê³  ë°©ì‹)
        const tempTextarea = document.createElement('textarea');
        tempTextarea.value = textContent;
        document.body.appendChild(tempTextarea);
        tempTextarea.select();
        
        if (document.execCommand('copy')) {
          showStatus('í‘œê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
        } else {
          throw new Error('ë³µì‚¬ ì‹¤íŒ¨');
        }
        
        document.body.removeChild(tempTextarea);
      } catch (error) {
        showStatus('ë³µì‚¬ ê¸°ëŠ¥ì´ ì œí•œë˜ì–´ ìˆìŠµë‹ˆë‹¤', 'error');
      }
    }

    // CSV ë‹¤ìš´ë¡œë“œ
    function downloadCSV() {
      const tables = resultArea.querySelectorAll('table');
      if (tables.length === 0) {
        showStatus('ë‹¤ìš´ë¡œë“œí•  í‘œê°€ ì—†ìŠµë‹ˆë‹¤!', 'error');
        return;
      }

      let csvContent = '';
      tables[0].querySelectorAll('tr').forEach(row => {
        const cells = Array.from(row.querySelectorAll('th, td'));
        const rowText = cells.map(cell => `"${cell.textContent.trim()}"`).join(',');
        csvContent += rowText + '\n';
      });

      try {
        const blob = new Blob(['\uFEFF' + csvContent], { type: 'text/csv; charset=utf-8' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `table_data_${new Date().toISOString().slice(0, 10)}.csv`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        showStatus('CSV íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!');
      } catch (error) {
        showStatus('ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ì´ ì œí•œë˜ì–´ ìˆìŠµë‹ˆë‹¤', 'error');
      }
    }

    // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ (íŒŒíŒŒê³  ë°©ì‹)
    document.addEventListener('keydown', function(event) {
      // Ctrl+Enter: ì²˜ë¦¬
      if (event.ctrlKey && event.key === 'Enter') {
        event.preventDefault();
        processData();
      }
      
      // Ctrl+L: ì§€ìš°ê¸°
      if (event.ctrlKey && event.key === 'l') {
        event.preventDefault();
        clearData();
      }
    });

    // ì´ˆê¸°í™”
    dataInput.focus();
    console.log('íŒŒíŒŒê³  ìŠ¤íƒ€ì¼ ë·°ì–´ê°€ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤');
  </script>
</body>
</html>
